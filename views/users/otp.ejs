<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>HPHONE</title>
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="" />
<meta property="og:type" content="" />
<meta property="og:url" content="" />
<meta property="og:image" content="" />
<link
  rel="shortcut icon"
  type="image/x-icon"
  href="Userassets/imgs/theme/hfavicon.jpeg"
/>
<link rel="stylesheet" href="Userassets/css/main.css?v=3.4" />


<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f0f0f0;
    padding: 20px;
  }
  .otp-container {
    max-width: 400px;
    margin: 0 auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  .otp-form input[type="text"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  .otp-form button {
    width: 100%;
    padding: 10px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  .otp-form button:hover {
    background-color: #0056b3;
  }
  #timer {
    text-align: center;
    margin-top: 10px;
  }
</style>
</head>

<body>
  <div class="otp-container">
    <h2>OTP Verification</h2>

    <form class="otp-form" action="/otp" method="POST">
      <label for="otp">Enter OTP:</label>
      <input type="text" id="otp" name="otp" required>
      <button type="submit">Verify OTP</button>
    </form>

    <div id="timer"></div>
    <button id="resendBtn" style="display:none;">Resend OTP</button> 
     
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      let timer;
      let seconds = 60;
    
      function startTimer() {
        clearInterval(timer);
        timer = setInterval(() => {
          document.getElementById('timer').innerText = `OTP Expires in ${seconds} seconds`;
          seconds--;
          if (seconds < 0) {
            clearInterval(timer);
            document.getElementById('timer').innerText = '';
            showResendAlert();
          }
        }, 1000);
      }

    startTimer();
      document.getElementById('resendBtn').addEventListener('click', () => {
        seconds = 60;
        startTimer();
        fetch('/resendOTP', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ userId: 'user_id_here' })
        })
        .then(response => {
          if (response.ok) {
            showAlert('success', 'OTP Resent successfully!');
          } else {
            showAlert('error', 'Failed to resend OTP. Please try again later.');
          }
        })
        .catch(error => {
          console.error('Error:', error);
          showAlert('error', 'An error occurred. Please try again later.');
        });
      });

      function showResendAlert() {
        Swal.fire({
          icon: 'info',
          title: 'Resend OTP',
          text: 'The timer has expired. Do you want to resend the OTP?',
          showCancelButton: true,
          confirmButtonText: 'Resend OTP',
          cancelButtonText: 'Cancel'
        }).then((result) => {
          if (result.isConfirmed) {
          document.getElementById('resendBtn').click();
          }
        });
      }


      function showAlert(type, message) {
        Swal.fire({
          icon: type,
          title: message
        });
      }
    </script>

   
   
</body>
</html>